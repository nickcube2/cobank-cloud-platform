apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

resources:
  - ../../base

# Local kind/minikube deployment uses images built on your machine.
# Load them into kind with: kind load docker-image ...
images:
  - name: cobank-backend
    newName: cobank-backend
    newTag: dev
  - name: cobank-frontend
    newName: cobank-frontend
    newTag: dev

# Ensure Kubernetes does not try to pull from a remote registry when using kind.
patches:
  - target:
      group: apps
      version: v1
      kind: Deployment
      name: backend
    path: patch-backend-pullpolicy.yaml
  - target:
      group: apps
      version: v1
      kind: Deployment
      name: frontend
    path: patch-frontend-pullpolicy.yaml
